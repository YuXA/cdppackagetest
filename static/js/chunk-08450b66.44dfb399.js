(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08450b66"],{"3cea":function(t,e,a){"use strict";var n=a("b23b"),i=a.n(n);i.a},5723:function(t,e,a){"use strict";a.d(e,"b",function(){return i}),a.d(e,"c",function(){return s}),a.d(e,"a",function(){return o}),a.d(e,"f",function(){return l}),a.d(e,"e",function(){return r}),a.d(e,"d",function(){return c});var n=a("b775");function i(t){return Object(n["a"])({url:"app/setting/admin/list",method:"post",data:t})}function s(t){return Object(n["a"])({url:"app/setting/admin/listAdmin",method:"post",data:t})}function o(t){return Object(n["a"])({url:"app/setting/admin/add",method:"post",data:t})}function l(t){return Object(n["a"])({url:"app/setting/admin/updateValid",method:"post",data:t})}function r(t){return Object(n["a"])({url:"app/setting/admin/reset-password",method:"post",data:t})}function c(t){return Object(n["a"])({url:"app/setting/admin/delete",method:"post",data:t})}},"9f35":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"top"},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.edit}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteRole}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateStatus}},[t._v("启用")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateStatus}},[t._v("停用")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.allotMenu}},[t._v("角色菜单分配")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.allotUser}},[t._v("角色用户分配")])],1),t._v(" "),a("div",{staticClass:"user_search"},[a("span",{staticStyle:{"line-height":"36px"}},[t._v("角色名称 :")]),t._v(" "),a("el-input",{staticClass:"ipt-search",attrs:{placeholder:"请输入用户名称"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),a("span",{staticStyle:{"line-height":"36px"}},[t._v("角色编号 :")]),t._v(" "),a("el-input",{staticClass:"ipt-search",attrs:{placeholder:"请输入用户编号"},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}}),t._v(" "),a("el-button",{on:{click:t.searchInfo}},[t._v("搜索")]),t._v(" "),a("el-button",{on:{click:t.reset}},[t._v("重置")])],1),t._v(" "),a("div",{staticClass:"line"})]),t._v(" "),a("div",{staticClass:"main-body"},[a("div",{staticClass:"lf_list"},[a("el-table",{ref:"multipleTable",attrs:{data:t.roleData,border:"","highlight-current-row":""},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"角色名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"角色编号",prop:"id"}}),t._v(" "),a("el-table-column",{attrs:{label:"有效状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("1"===e.row.available?"是":"否"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"说明",prop:"describe"}})],1)],1),t._v(" "),a("div",{staticClass:"rt_info"},[a("el-tag",{staticStyle:{"margin-left":"15px"}},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"item"},[a("span",{staticClass:"tit"},[t._v("角色编号:")]),t._v(" "),a("span",[t._v(t._s(t.currentRow.id))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"tit"},[t._v("角色名称:")]),t._v(" "),a("span",[t._v(t._s(t.currentRow.name))])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"tit"},[t._v("状态:")]),t._v(" "),a("span",[t._v(t._s("1"===t.currentRow.available?"是":"否"))])]),t._v(" "),a("div",{staticClass:"textarea"},[a("span",[t._v("说明:")]),t._v(" "),a("span",[t._v(t._s(t.currentRow.describe))])])])],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.isShowAdd,width:"30%"},on:{"update:visible":function(e){t.isShowAdd=e}}},[a("div",[a("el-form",{ref:"ruleForm",staticClass:"add_info",attrs:{rules:t.rules,"label-width":"80px","label-position":"left",model:t.addInfo}},[a("el-form-item",{staticClass:"item",attrs:{label:"用户名称",prop:"name"}},[a("el-input",{model:{value:t.addInfo.name,callback:function(e){t.$set(t.addInfo,"name",e)},expression:"addInfo.name"}})],1),t._v(" "),a("el-form-item",{staticClass:"item",attrs:{label:"是否启用"}},[a("el-select",{model:{value:t.addInfo.available,callback:function(e){t.$set(t.addInfo,"available",e)},expression:"addInfo.available"}},[a("el-option",{attrs:{label:"是",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"item",attrs:{label:"用户描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.addInfo.describe,callback:function(e){t.$set(t.addInfo,"describe",e)},expression:"addInfo.describe"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowAdd=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addRole("ruleForm")}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"角色菜单分配",visible:t.isShowMenu,width:"50%"},on:{"update:visible":function(e){t.isShowMenu=e}}},[a("div",[a("el-tree",{attrs:{data:t.data,"show-checkbox":"","default-expand-all":"",props:t.defaultProps},on:{"check-change":t.chooseMenu}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowMenu=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addMenus}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"角色用户分配",visible:t.isShowUser,width:"40%"},on:{"update:visible":function(e){t.isShowUser=e}}},[a("div",[a("el-table",{attrs:{data:t.allotUserList,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户名称",prop:"nickname"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户编号",prop:"uid"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属公司",prop:"customer_id"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowUser=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.allot}},[t._v("确 定")])],1)])],1)},i=[],s=(a("7f7f"),a("cc5e")),o=a("d5b2"),l=a("5723"),r={data:function(){return{roleData:[],allotUserList:[],username:"",userId:"",currentRow:"",isShowAdd:!1,title:"",rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},data:[{name:"所有菜单项",children:[],id:0}],defaultProps:{label:"name",children:"children"},addInfo:{name:"",available:"",describe:""},temp:{name:"",available:"",describe:""},isShowMenu:!1,isShowUser:!1,uid:"",mid:[]}},created:function(){this.getRoleList()},methods:{getRoleList:function(){var t=this,e={page:1,size:10,role_name:this.username,role_no:this.userId};Object(s["e"])(e).then(function(e){console.log(e),t.roleData=e.data,t.currentRow=t.roleData[0]})},searchInfo:function(){this.getRoleList()},reset:function(){this.username="",this.userId="",this.getRoleList()},handleCurrentChange:function(t){this.currentRow=t;var e=this.roleData.indexOf(t);this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(this.roleData[e])},add:function(){this.title="新增角色",this.addInfo={},this.isShowAdd=!0},addRole:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;Object(s["b"])(e.addInfo).then(function(t){console.log(t),e.isShowAdd=!1,e.getRoleList()})})},edit:function(){this.title="编辑角色",this.addInfo=this.temp,this.isShowAdd=!0,this.addInfo.roleid=this.currentRow.id,this.addInfo.name=this.currentRow.name,this.addInfo.describe=this.currentRow.describe,this.addInfo.available=this.currentRow.available},deleteRole:function(){var t=this;this.$confirm("此操作将删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s["c"])({roleid:t.currentRow.id}).then(function(e){t.getRoleList(),t.$message({type:"success",message:"删除成功!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},updateStatus:function(t){var e=this,a="启用"===t.target.innerText?"1":"0";Object(s["f"])({roleid:this.currentRow.id,available:a}).then(function(t){e.getRoleList()})},allotMenu:function(){var t=this;this.isShowMenu=!0,Object(o["c"])().then(function(e){console.log(e),t.data[0].children=e.data})},allotUser:function(){var t=this;this.isShowUser=!0,Object(l["c"])().then(function(e){t.allotUserList=e.data})},handleSelectionChange:function(t){console.log(t),this.uid=t.map(function(t){return t.uid}),console.log(this.uid)},allot:function(){var t=this;if(this.uid){var e={roleid:[this.currentRow.id],uid:this.uid};Object(s["d"])(e).then(function(e){console.log(e),t.isShowUser=!1})}else this.isShowUser=!1},chooseMenu:function(t){this.mid.push(t),console.log(this.mid)},addMenus:function(){var t=this,e=this.mid.map(function(t){return t.id}),a={roleid:[this.currentRow.id],mid:e};Object(s["a"])(a).then(function(e){console.log(e),t.addMenus=!1})}}},c=r,d=(a("3cea"),a("2877")),u=Object(d["a"])(c,n,i,!1,null,"24e7a810",null);e["default"]=u.exports},b23b:function(t,e,a){},cc5e:function(t,e,a){"use strict";a.d(e,"e",function(){return i}),a.d(e,"b",function(){return s}),a.d(e,"c",function(){return o}),a.d(e,"f",function(){return l}),a.d(e,"d",function(){return r}),a.d(e,"a",function(){return c});var n=a("b775");function i(t){return Object(n["a"])({url:"app/setting/role/list",method:"post",data:t})}function s(t){return Object(n["a"])({url:"app/setting/role/add",method:"post",data:t})}function o(t){return Object(n["a"])({url:"app/setting/role/delete",method:"post",data:t})}function l(t){return Object(n["a"])({url:"app/setting/role/update",method:"post",data:t})}function r(t){return Object(n["a"])({url:"app/setting/role/addRoleAdmin",method:"post",data:t})}function c(t){return Object(n["a"])({url:"app/setting/role/addRoleMenu",method:"post",data:t})}},d5b2:function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"b",function(){return s}),a.d(e,"a",function(){return o});var n=a("b775");function i(t){return Object(n["a"])({url:"app/setting/menu/list",method:"post",data:t})}function s(t){return Object(n["a"])({url:"app/setting/menu/add",method:"post",data:t})}function o(t){return Object(n["a"])({url:"app/setting/menu/delete",method:"post",data:t})}}}]);