(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06458648"],{4718:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"top"},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新增")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.edit}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.deleterole}},[t._v("删除")])],1),t._v(" "),i("div",{staticClass:"user_search"},[i("span",{staticStyle:{"line-height":"36px"}},[t._v("用户名称 :")]),t._v(" "),i("el-input",{staticClass:"ipt-search",attrs:{placeholder:"请输入用户名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),i("span",{staticStyle:{"line-height":"36px"}},[t._v("用户编号 :")]),t._v(" "),i("el-input",{staticClass:"ipt-search",attrs:{placeholder:"请输入用户编号"},model:{value:t.no,callback:function(e){t.no=e},expression:"no"}}),t._v(" "),i("el-button",{on:{click:t.search}},[t._v("搜索")]),t._v(" "),i("el-button",{on:{click:t.reset}},[t._v("重置")])],1),t._v(" "),i("div",{staticClass:"line"})]),t._v(" "),i("div",{staticClass:"main-body"},[i("div",{staticClass:"lf_list"},[i("el-table",{attrs:{data:t.userList,border:"","highlight-current-row":""},on:{"current-change":t.handleCurrentChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:"用户名称",prop:"nickname"}}),t._v(" "),i("el-table-column",{attrs:{label:"用户编号",prop:"cid"}})],1)],1),t._v(" "),i("div",{staticClass:"rt_info"},[i("el-tag",{staticStyle:{"margin-left":"15px"}},[t._v("基本信息")]),t._v(" "),i("div",{staticClass:"info"},[i("div",{staticClass:"item"},[i("span",{staticClass:"tit"},[t._v("客户ID:")]),t._v(" "),i("span",[t._v(t._s(t.currentRow.cid))])]),t._v(" "),i("div",{staticClass:"item"},[i("span",{staticClass:"tit"},[t._v("客户名称:")]),t._v(" "),i("span",[t._v(t._s(t.currentRow.nickname))])]),t._v(" "),i("div",{staticClass:"item"},[i("span",{staticClass:"tit"},[t._v("联系人姓名:")]),t._v(" "),i("span",[t._v(t._s(t.currentRow.cname))])]),t._v(" "),i("div",{staticClass:"item"},[i("span",{staticClass:"tit"},[t._v("邮箱:")]),t._v(" "),i("span",[t._v(t._s(t.currentRow.email))])]),t._v(" "),i("div",{staticClass:"item"},[i("span",{staticClass:"tit"},[t._v("联系电话:")]),t._v(" "),i("span",[t._v(t._s(t.currentRow.phone))])]),t._v(" "),i("div",{staticClass:"item"},[i("span",{staticClass:"tit"},[t._v("企业ID:")]),t._v(" "),i("span",[t._v(t._s(t.currentRow.enterprise_id))])]),t._v(" "),i("div",{staticClass:"checkout",staticStyle:{width:"100%"}},[i("span",[t._v("小程序:")]),t._v(" "),i("el-checkbox-group",{model:{value:t.currentRow.appIds,callback:function(e){t.$set(t.currentRow,"appIds",e)},expression:"currentRow.appIds"}},t._l(t.appList,function(e){return i("el-checkbox",{key:e.id,staticClass:"app_item",staticStyle:{width:"18%"},attrs:{label:e.id}},[t._v(t._s(e.name))])}),1)],1)])],1)]),t._v(" "),i("el-dialog",{attrs:{visible:t.isShowAdd,width:"50%"},on:{"update:visible":function(e){t.isShowAdd=e}}},[i("div",[i("el-form",{ref:"ruleForm",staticClass:"add_info",attrs:{rules:t.rules,"label-width":"80px","label-position":"left",model:t.addInfo}},[i("el-form-item",{staticClass:"item",attrs:{label:"客户名称",prop:"nickname"}},[i("el-input",{model:{value:t.addInfo.nickname,callback:function(e){t.$set(t.addInfo,"nickname",e)},expression:"addInfo.nickname"}})],1),t._v(" "),i("el-form-item",{staticClass:"item",attrs:{label:"联系人姓名",prop:"cname"}},[i("el-input",{model:{value:t.addInfo.cname,callback:function(e){t.$set(t.addInfo,"cname",e)},expression:"addInfo.cname"}})],1),t._v(" "),i("el-form-item",{staticClass:"item",attrs:{label:"邮箱",prop:"email"}},[i("el-input",{model:{value:t.addInfo.email,callback:function(e){t.$set(t.addInfo,"email",e)},expression:"addInfo.email"}})],1),t._v(" "),i("el-form-item",{staticClass:"item",attrs:{label:"企业ID",prop:"enterprise_id"}},[i("el-input",{model:{value:t.addInfo.enterprise_id,callback:function(e){t.$set(t.addInfo,"enterprise_id",e)},expression:"addInfo.enterprise_id"}})],1),t._v(" "),i("el-form-item",{staticClass:"item",attrs:{label:"手机号",prop:"phone"}},[i("el-input",{model:{value:t.addInfo.phone,callback:function(e){t.$set(t.addInfo,"phone",e)},expression:"addInfo.phone"}})],1),t._v(" "),i("el-form-item",{staticClass:"item",attrs:{label:"有效日期"}},[i("el-date-picker",{attrs:{"value-format":"timestamp",type:"date",placeholder:"选择日期"},model:{value:t.addInfo.vaild_time,callback:function(e){t.$set(t.addInfo,"vaild_time",e)},expression:"addInfo.vaild_time"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"小程序"}},[i("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.appList,function(e){return i("el-checkbox",{key:e.id,staticClass:"app_item",staticStyle:{width:"18%"},attrs:{label:e.id}},[t._v(t._s(e.name))])}),1)],1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.isShowAdd=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addUser("ruleForm")}}},[t._v("确 定")])],1)])],1)},a=[],n=(i("7f7f"),i("28a5"),i("b39f")),c={data:function(){return{userList:[],textarea:"",checkList:[],appList:[],name:"",no:"",currentRow:"",isShowAdd:!1,addInfo:{cid:"",nickname:"",cname:"",email:"",enterprise_id:"",phone:"",vaild_time:"",checkList:[]},rules:{nickname:[{required:!0,message:"请输入客户名称",trigger:"blur"}],cname:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],enterprise_id:[{required:!0,message:"请输入企业ID",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}]}}},created:function(){this.getClientList(),this.getApp()},methods:{edit:function(){this.isShowAdd=!0,this.addInfo.cid=this.currentRow.cid,this.addInfo.nickname=this.currentRow.nickname,this.addInfo.cname=this.currentRow.cname,this.addInfo.email=this.currentRow.email,this.addInfo.enterprise_id=this.currentRow.enterprise_id,this.addInfo.phone=this.currentRow.phone,this.addInfo.vaild_time=this.currentRow.vaild_time+"000",this.checkList=this.currentRow.appids.split(",")},getClientList:function(){var t=this,e={page:1,size:10,name:this.name,no:this.no};Object(n["c"])(e).then(function(e){console.log(e),t.userList=e.data,console.log(t.userList),t.currentRow=t.userList[0]})},search:function(){this.getClientList()},reset:function(){""===this.name&&""===this.no||(this.name="",this.no="",this.getClientList())},getApp:function(){var t=this;Object(n["b"])().then(function(e){console.log(e),t.appList=e.data})},handleCurrentChange:function(t){this.currentRow=t},add:function(){this.isShowAdd=!0,this.addInfo={}},addUser:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var i=e.addInfo;i.appids=e.checkList.join(","),Object(n["a"])(i).then(function(t){console.log(t),e.isShowAdd=!1,e.getClientList(),e.checkList=[]})})},deleterole:function(){var t=this;this.$confirm("此操作将删除该客户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n["d"])({cid:t.currentRow.cid}).then(function(e){t.getClientList(),t.$message({type:"success",message:"删除成功!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},r=c,o=(i("f4cb"),i("2877")),l=Object(o["a"])(r,s,a,!1,null,"4fe40579",null);e["default"]=l.exports},b39f:function(t,e,i){"use strict";i.d(e,"c",function(){return a}),i.d(e,"b",function(){return n}),i.d(e,"a",function(){return c}),i.d(e,"d",function(){return r});var s=i("b775");function a(t){return Object(s["a"])({url:"app/setting/customer/list",method:"post",data:t})}function n(){return Object(s["a"])({url:"app/setting/enumerate/listapp",method:"post"})}function c(t){return Object(s["a"])({url:"app/setting/customer/add",method:"post",data:t})}function r(t){return Object(s["a"])({url:"app/setting/customer/delete",method:"post",data:t})}},f250:function(t,e,i){},f4cb:function(t,e,i){"use strict";var s=i("f250"),a=i.n(s);a.a}}]);